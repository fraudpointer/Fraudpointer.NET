<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>.NET Proxy Client for FraudPointer Service: WebApplicationClientExample</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">.NET Proxy Client for FraudPointer Service&#160;<span id="projectnumber">ver.1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('da/d0b/_web_application_client_example-example.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">WebApplicationClientExample</div>  </div>
</div>
<div class="contents">
<p>This is a Web Application that is using the FraudPointer API.</p>
<p><code>AcmeBuyingTickets.Master</code> </p>
<div class="fragment"><pre class="fragment">﻿&lt;%@ Master Language=<span class="stringliteral">&quot;C#&quot;</span> AutoEventWireup=<span class="stringliteral">&quot;true&quot;</span> CodeBehind=<span class="stringliteral">&quot;AcmeBuyingTickets.master.cs&quot;</span> Inherits=<span class="stringliteral">&quot;WebApplicationClientExample.AcmeBuyingTickets&quot;</span> %&gt;

&lt;!DOCTYPE html PUBLIC <span class="stringliteral">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="stringliteral">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;

&lt;html xmlns=<span class="stringliteral">&quot;http://www.w3.org/1999/xhtml&quot;</span> &gt;
&lt;head runat=<span class="stringliteral">&quot;server&quot;</span>&gt;
    &lt;link href=<span class="stringliteral">&quot;css/main.css&quot;</span> type=<span class="stringliteral">&quot;text/css&quot;</span> rel=<span class="stringliteral">&quot;Stylesheet&quot;</span> /&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;asp:ContentPlaceHolder ID=<span class="stringliteral">&quot;head&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span>&gt;
    &lt;/asp:ContentPlaceHolder&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form <span class="keywordtype">id</span>=<span class="stringliteral">&quot;form1&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span>&gt;
    &lt;div&gt;    
        &lt;asp:HyperLink ID=<span class="stringliteral">&quot;hprlnkLogo&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> ImageUrl=<span class="stringliteral">&quot;~/images/acme_logo.png&quot;</span> BorderWidth=<span class="stringliteral">&quot;0&quot;</span> NavigateUrl=<span class="stringliteral">&quot;~/Default.aspx&quot;</span> ToolTip=<span class="stringliteral">&quot;ACME Welcome Page&quot;</span> /&gt;
        &lt;asp:ContentPlaceHolder ID=<span class="stringliteral">&quot;ContentPlaceHolder1&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span>&gt;        
        &lt;/asp:ContentPlaceHolder&gt;
        &lt;asp:Label ID=<span class="stringliteral">&quot;lblMessageToUser&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> OnInit=<span class="stringliteral">&quot;MessageToUser_Init&quot;</span> /&gt;
    &lt;/div&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p><code>AcmeBuyingTickets.Master.cs</code> </p>
<div class="fragment"><pre class="fragment">﻿using System;
<span class="keyword">using</span> System.Collections.Generic;
<span class="keyword">using</span> System.Linq;
<span class="keyword">using</span> System.Web;
<span class="keyword">using</span> System.Web.UI;
<span class="keyword">using</span> System.Web.UI.WebControls;

<span class="keyword">namespace </span>WebApplicationClientExample
{
    <span class="keyword">public</span> <span class="keyword">partial class </span>AcmeBuyingTickets : System.Web.UI.MasterPage
    {
        <span class="keyword">public</span> <span class="keywordtype">string</span> MessageToUser
        {
            <span class="keyword">get</span>
            {
                <span class="keywordflow">return</span> lblMessageToUser.Text;
            }
            <span class="keyword">set</span>
            {
                lblMessageToUser.Text = value;
            }
        }

        <span class="keyword">protected</span> <span class="keywordtype">void</span> Page_Load(<span class="keywordtype">object</span> sender, EventArgs e)
        {

        }

        <span class="keyword">protected</span> <span class="keywordtype">void</span> MessageToUser_Init(Object o, EventArgs e)
        {
            <span class="keywordflow">if</span> ( IsPostBack == <span class="keyword">false</span> )
            {
                <span class="comment">// the first time, clear message</span>
                lblMessageToUser.Text = <span class="stringliteral">&quot;&quot;</span>;
            }    
        } <span class="comment">// MessageToUser_Init()</span>
        <span class="comment">//-------------------------</span>
    }
}
</pre></div><p><code>Default.aspx</code> </p>
<div class="fragment"><pre class="fragment">﻿&lt;%@ Page Language=<span class="stringliteral">&quot;C#&quot;</span> MasterPageFile=<span class="stringliteral">&quot;~/AcmeBuyingTickets.Master&quot;</span> AutoEventWireup=<span class="stringliteral">&quot;true&quot;</span> CodeBehind=<span class="stringliteral">&quot;Default.aspx.cs&quot;</span> Inherits=<span class="stringliteral">&quot;WebApplicationClientExample.Default&quot;</span> %&gt;

&lt;asp:Content ID=<span class="stringliteral">&quot;Content1&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> ContentPlaceHolderID=<span class="stringliteral">&quot;head&quot;</span>&gt;
    &lt;script type=<span class="stringliteral">&quot;text/javascript&quot;</span> language=<span class="stringliteral">&#39;javascript&#39;</span>&gt;function foo() {}&lt;/script&gt;
&lt;/asp:Content&gt;
&lt;asp:Content ID=<span class="stringliteral">&quot;Content2&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> ContentPlaceHolderID=<span class="stringliteral">&quot;ContentPlaceHolder1&quot;</span>&gt;
&lt;h1&gt;Welcome&lt;/h1&gt;
&lt;asp:HyperLink ID=<span class="stringliteral">&quot;hprlnkPickupTickets&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> NavigateUrl=<span class="stringliteral">&quot;~/Checkout.aspx&quot;</span> Text=<span class="stringliteral">&quot;Pick up your tickets&quot;</span> /&gt;
&lt;/asp:Content&gt;
</pre></div><p><code>Default.aspx.cs</code> </p>
<div class="fragment"><pre class="fragment">﻿using System;
<span class="keyword">using</span> System.Collections.Generic;
<span class="keyword">using</span> System.Linq;
<span class="keyword">using</span> System.Web;
<span class="keyword">using</span> System.Web.UI;
<span class="keyword">using</span> System.Web.UI.WebControls;

<span class="keyword">namespace </span>WebApplicationClientExample
{
    <span class="keyword">public</span> <span class="keyword">partial class </span>Default : System.Web.UI.Page
    {
        <span class="keyword">protected</span> <span class="keywordtype">void</span> Page_Load(<span class="keywordtype">object</span> sender, EventArgs e)
        {

            Context.Session.Clear();

        }
    }
}
</pre></div><p><code>Checkout.aspx</code> </p>
<div class="fragment"><pre class="fragment">﻿&lt;%@ Page Language=<span class="stringliteral">&quot;C#&quot;</span> MasterPageFile=<span class="stringliteral">&quot;~/AcmeBuyingTickets.Master&quot;</span> AutoEventWireup=<span class="stringliteral">&quot;true&quot;</span> CodeBehind=<span class="stringliteral">&quot;Checkout.aspx.cs&quot;</span> Inherits=<span class="stringliteral">&quot;WebApplicationClientExample.Checkout&quot;</span> %&gt;

&lt;asp:Content ID=<span class="stringliteral">&quot;Content1&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> ContentPlaceHolderID=<span class="stringliteral">&quot;head&quot;</span>&gt;
    
    &lt;!-- =================================== --&gt;
    &lt;!-- This is necessary <span class="keywordflow">for</span> FRAUD POINTER --&gt;
    &lt;!--                                     --&gt;
    &lt;script language=<span class="stringliteral">&quot;javascript&quot;</span> type=<span class="stringliteral">&quot;text/javascript&quot;</span> src=<span class="stringliteral">&#39;&lt;%= FraudPointerScriptSource() %&gt;&#39;</span>&gt;&lt;/script&gt;
    &lt;script language=<span class="stringliteral">&quot;javascript&quot;</span> type=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;
        window.onload = function() {
            fraudpointer.fp(<span class="stringliteral">&#39;&lt;%= hdnfldSessionId.ClientID %&gt;&#39;</span>);
        }
    &lt;/script&gt;
    &lt;!-- end of FRAUD POINTER related javascript stuff --&gt;
    &lt;!-- ============================================= --&gt;
    
    &lt;script language=<span class="stringliteral">&quot;javascript&quot;</span> type=<span class="stringliteral">&quot;text/javascript&quot;</span> src=<span class="stringliteral">&quot;scripts/checkout.js&quot;</span>&gt;&lt;/script&gt;
   
&lt;/asp:Content&gt;

&lt;asp:Content ID=<span class="stringliteral">&quot;Content2&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> ContentPlaceHolderID=<span class="stringliteral">&quot;ContentPlaceHolder1&quot;</span>&gt;

    &lt;hr/&gt;
    Order Number: &lt;asp:Label ID=<span class="stringliteral">&quot;lblAcmeOrderNumber&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;
    &lt;br/&gt;
    
    &lt;!-- Print the Number of Failed Payment Attempts --&gt;
    &lt;span <span class="keyword">class</span>=<span class="stringliteral">&#39;failed_payment_attempts&#39;</span>&gt;&lt;%= GetNumberOfFailedPaymentAttempts()&gt;=1 ? <span class="stringliteral">&quot;Failed Payment Attempts: &quot;</span> + GetNumberOfFailedPaymentAttempts() : <span class="stringliteral">&quot;&quot;</span> %&gt;&lt;/span&gt;
    &lt;!-- =========================================== --&gt;
            
    &lt;fieldset&gt;
        &lt;legend&gt;Tickets from Europe to USA - Pick up your tickets&lt;/legend&gt;
        &lt;asp:HiddenField ID=<span class="stringliteral">&quot;hdnfldSessionId&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;
               
        &lt;asp:Label ID=<span class="stringliteral">&quot;lblBoxCityFrom&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> AssociatedControlID=<span class="stringliteral">&quot;lstBoxCityFrom&quot;</span> Text=<span class="stringliteral">&quot;Travel From:&quot;</span> /&gt;
        &lt;asp:ListBox ID=<span class="stringliteral">&quot;lstBoxCityFrom&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> SelectionMode=<span class="stringliteral">&quot;Single&quot;</span> Rows=<span class="stringliteral">&quot;1&quot;</span> OnInit=<span class="stringliteral">&quot;BoxCityFrom_Init&quot;</span> /&gt;&lt;br /&gt;
        
        &lt;asp:Label ID=<span class="stringliteral">&quot;lblBoxCityTo&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> AssociatedControlID=<span class="stringliteral">&quot;lstBoxCityTo&quot;</span> Text=<span class="stringliteral">&quot;Travel To:&quot;</span> /&gt;
        &lt;asp:ListBox ID=<span class="stringliteral">&quot;lstBoxCityTo&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> SelectionMode=<span class="stringliteral">&quot;Single&quot;</span> Rows=<span class="stringliteral">&quot;1&quot;</span> OnInit=<span class="stringliteral">&quot;BoxCityTo_Init&quot;</span> /&gt;&lt;br /&gt;
        
        &lt;asp:Button ID=<span class="stringliteral">&quot;btnCalculatePrice&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> CausesValidation=<span class="stringliteral">&quot;false&quot;</span> UseSubmitBehavior=<span class="stringliteral">&quot;false&quot;</span> Text=<span class="stringliteral">&quot;Calculate Price&quot;</span> OnInit=<span class="stringliteral">&quot;ButtonCalculatePrice_Init&quot;</span>/&gt;
        
        &lt;fieldset&gt;
        
            &lt;legend&gt;Charging Details:&lt;/legend&gt;
            
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblPrice&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;Price:&quot;</span> /&gt;
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblPriceValue&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;&lt;br /&gt;
            
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblCreditCardNumber&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> AssociatedControlID=<span class="stringliteral">&quot;txtbxCreditCardNumber&quot;</span> Text=<span class="stringliteral">&quot;Credit Card:&quot;</span> /&gt;
            &lt;asp:TextBox ID=<span class="stringliteral">&quot;txtbxCreditCardNumber&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;&lt;br /&gt;
            
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblExpires&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;Expires: Month: &quot;</span> AssociatedControlId=<span class="stringliteral">&quot;lstBoxExpiresMonth&quot;</span>/&gt;
            &lt;asp:ListBox ID=<span class="stringliteral">&quot;lstBoxExpiresMonth&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> SelectionMode=<span class="stringliteral">&quot;Single&quot;</span> Rows=<span class="stringliteral">&quot;1&quot;</span> OnInit=<span class="stringliteral">&quot;BoxExpiresMonth_Init&quot;</span> /&gt;        
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblExpiresYear&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;Year: &quot;</span> AssociatedControlID=<span class="stringliteral">&quot;lstBoxExpiresYear&quot;</span>/&gt;
            &lt;asp:ListBox ID=<span class="stringliteral">&quot;lstBoxExpiresYear&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> SelectionMode=<span class="stringliteral">&quot;Single&quot;</span> Rows=<span class="stringliteral">&quot;1&quot;</span> OnInit=<span class="stringliteral">&quot;BoxExpiresYear_Init&quot;</span> /&gt;&lt;br /&gt;
            
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblCardHolderName&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;Card Holder Name: &quot;</span> AssociatedControlID=<span class="stringliteral">&quot;txtbxCardHolderName&quot;</span> /&gt;
            &lt;asp:TextBox ID=<span class="stringliteral">&quot;txtbxCardHolderName&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;&lt;br /&gt;
            
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblBankNameOfCard&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;Bank Name of Card: &quot;</span> AssociatedControlID=<span class="stringliteral">&quot;txtbxBankNameOfCard&quot;</span> /&gt;
            &lt;asp:TextBox ID=<span class="stringliteral">&quot;txtbxBankNameOfCard&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;&lt;br /&gt;
            
            &lt;asp:Label ID=<span class="stringliteral">&quot;lblCcv&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;CCV:&quot;</span> AssociatedControlID=<span class="stringliteral">&quot;txtbxCcv&quot;</span> /&gt;
            &lt;asp:TextBox ID=<span class="stringliteral">&quot;txtbxCcv&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;&lt;br /&gt;
        
            &lt;asp:CheckBox ID=<span class="stringliteral">&quot;chckbxSuccessBankTransaction&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Checked=<span class="stringliteral">&quot;true&quot;</span> Text=<span class="stringliteral">&quot;Succeed with Bank?&quot;</span>/&gt;&lt;br /&gt;
            &lt;asp:Button ID=<span class="stringliteral">&quot;btnPurchase&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> OnClick=<span class="stringliteral">&quot;Purchase_Click&quot;</span> Text=<span class="stringliteral">&quot;Purchase&quot;</span> UseSubmitBehavior=<span class="stringliteral">&quot;true&quot;</span> /&gt;
        &lt;/fieldset&gt;        
        
    &lt;/fieldset&gt;
    
    &lt;%= <span class="stringliteral">&quot;Assessment Session Id: &quot;</span> + GetOrCreateAssessmentSession().Id %&gt;
    &lt;asp:Button ID=<span class="stringliteral">&quot;btnStartOver&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> Text=<span class="stringliteral">&quot;Clear Assessment Session and Start Over&quot;</span> OnClick=<span class="stringliteral">&quot;StartOver_Click&quot;</span>/&gt;
    
&lt;/asp:Content&gt;

</pre></div><p><code>Checkout.aspx.cs</code> </p>
<div class="fragment"><pre class="fragment">﻿using System;
<span class="keyword">using</span> System.Threading;
<span class="keyword">using</span> System.Web.UI.WebControls;
<span class="keyword">using</span> System.Configuration;
<span class="keyword">using</span> Fraudpointer.API;
<span class="keyword">using</span> Fraudpointer.API.Extensions;
<span class="keyword">using</span> Fraudpointer.API.Models;
<span class="keyword">using</span> System.Web;

<span class="keyword">namespace </span>WebApplicationClientExample
{
    <span class="keyword">public</span> <span class="keyword">partial class </span>Checkout : System.Web.UI.Page
    {
<span class="preprocessor">        #region private fields</span>
<span class="preprocessor"></span>
        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">string</span> ASSESSMENT_SESSION = <span class="stringliteral">&quot;ASSESSMENT_SESSION&quot;</span>;

        <span class="keyword">private</span> readonly <span class="keywordtype">string</span> _fraudPointerUrl = ConfigurationManager.AppSettings[<span class="stringliteral">&quot;FraudPointerUrl&quot;</span>];
        <span class="keyword">private</span> readonly <span class="keywordtype">string</span> _fraudPointerApiBaseUrl = ConfigurationManager.AppSettings[<span class="stringliteral">&quot;FraudPointerApiBaseUrl&quot;</span>];
        <span class="keyword">private</span> readonly <span class="keywordtype">string</span> _fraudPointerScriptUrl = ConfigurationManager.AppSettings[<span class="stringliteral">&quot;FraudPointerScriptUrl&quot;</span>];
        <span class="keyword">private</span> readonly <span class="keywordtype">string</span> _fraudPointerApiKey = GetFraudpointerApiKey();

        <span class="keyword">private</span> IClient _client;

<span class="preprocessor">        #endregion</span>
<span class="preprocessor"></span>
        <span class="keyword">protected</span> <span class="keywordtype">void</span> Page_Load(<span class="keywordtype">object</span> sender, EventArgs e)
        {
            _client = GetFraudpointerClient(_fraudPointerUrl, _fraudPointerApiBaseUrl, _fraudPointerApiKey);

            hdnfldSessionId.Value = GetOrCreateAssessmentSession().Id.ToString();

            lblAcmeOrderNumber.Text = GetAcmeOrderNumber();

        } <span class="comment">// Page_load ()</span>
        <span class="comment">//---------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">void</span> BoxCityFrom_Init(Object o, EventArgs e)
        {
            <span class="comment">// Cities From</span>
            lstBoxCityFrom.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;London&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));
            lstBoxCityFrom.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;Madrid&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>));
            lstBoxCityFrom.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;Paris&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>));
            lstBoxCityFrom.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;Rome&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>));

        } <span class="comment">// BoxCityFrom_Init ()</span>
        <span class="comment">//------------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">void</span> BoxCityTo_Init(Object o, EventArgs e)
        {
            <span class="comment">// Cities To</span>
            lstBoxCityTo.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;Atlanta&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));
            lstBoxCityTo.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;Chicago&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>));
            lstBoxCityTo.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;New York&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>));
            lstBoxCityTo.Items.Add(<span class="keyword">new</span> ListItem(<span class="stringliteral">&quot;Los Angeles&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>));

        } <span class="comment">// BoxCityTo_Init ()</span>
        <span class="comment">//------------------------</span>


        <span class="keyword">protected</span> <span class="keywordtype">void</span> ButtonCalculatePrice_Init(Object o, EventArgs e)
        {
            btnCalculatePrice.Attributes.Add(<span class="stringliteral">&quot;onclick&quot;</span>, GetCalculatePriceJavascript(<span class="keyword">false</span>));

        } <span class="comment">// ButtonCalculatePrice_Init ()</span>
        <span class="comment">//--------------------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">void</span> BoxExpiresMonth_Init(Object o, EventArgs e)
        {
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= 12; i++)
            {
                lstBoxExpiresMonth.Items.Add(<span class="keyword">new</span> ListItem(String.Format(<span class="stringliteral">&quot;{0:00}&quot;</span>, i), i.ToString()));
            }

        } <span class="comment">// BoxExpiresMonth_Init()</span>
        <span class="comment">//-------------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">void</span> BoxExpiresYear_Init(Object o, EventArgs e)
        {

            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = DateTime.Now.Year; i &lt;= DateTime.Now.AddYears(20).Year; i++)
            {
                lstBoxExpiresYear.Items.Add(<span class="keyword">new</span> ListItem(String.Format(<span class="stringliteral">&quot;{0:0000}&quot;</span>, i), i.ToString()));
            }

        } <span class="comment">// BoxExpiresYear_Init ()</span>
        <span class="comment">//-------------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">string</span> FraudPointerScriptSource()
        {
            <span class="keywordflow">return</span> _fraudPointerUrl + <span class="stringliteral">&quot;/&quot;</span> + _fraudPointerScriptUrl;

        } <span class="comment">// FraudPointerScriptSource ()</span>
        <span class="comment">//-------------------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">void</span> Purchase_Click(Object o, EventArgs e)
        {
            <span class="comment">// Create Checkout Event and send it over to FraudPointer Server</span>
            Event l_eventCreated = CreateAndSendCheckoutEvent();

            <span class="comment">// ask for Interim Fraud Assessment</span>

            FraudAssessment l_fa = _client.CreateFraudAssessment(GetOrCreateAssessmentSession(), <span class="keyword">true</span>);

            <span class="keywordflow">if</span> (l_fa.Result == <span class="stringliteral">&quot;Accept&quot;</span>)
            {
                <span class="comment">// We will try to charge customers credit card</span>

                <span class="keywordtype">bool</span> l_chargeResult = SendDataToBankForCharging();
                <span class="keywordflow">if</span> (l_chargeResult)
                {
                    <span class="comment">// success charging credit card</span>
                    CreateAndSendSuccessfulPaymentEvent();

                    l_fa = _client.CreateFraudAssessment(GetOrCreateAssessmentSession(), <span class="keyword">false</span>);

                    ResetSessionVars();

                    String l_messageToUser = <span class="stringliteral">&quot;You have been successfully charged.&quot;</span>;
                    String l_strGoBackUrl = <span class="stringliteral">&quot;Default.aspx&quot;</span>;

                    Response.Redirect(<span class="stringliteral">&quot;~/PurchaseResult.aspx?message=&quot;</span> + HttpUtility.UrlEncode(l_messageToUser) + <span class="stringliteral">&quot;&amp;go_back_url=&quot;</span> + HttpUtility.UrlEncode(l_strGoBackUrl), <span class="keyword">true</span>);

                    <span class="keywordflow">return</span>;

                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">// charging the card failed.</span>

                    CreateAndSendFailedPaymentEvent();

                    <span class="comment">// increase the number of failed payments</span>
                    <span class="keywordtype">int</span> l_numberOfFailedPaymentAttempts = GetNumberOfFailedPaymentAttempts();
                    l_numberOfFailedPaymentAttempts = l_numberOfFailedPaymentAttempts + 1;
                    Context.Session[<span class="stringliteral">&quot;number_of_failed_payment_attempts&quot;</span>] = l_numberOfFailedPaymentAttempts;

                    <span class="keywordflow">if</span> (l_numberOfFailedPaymentAttempts &gt; 3)
                    {
                        ResetSessionVars();
                        Response.Redirect(<span class="stringliteral">&quot;~/Default.aspx&quot;</span>, <span class="keyword">true</span>);
                        <span class="keywordflow">return</span>;
                    }
                    <span class="keywordflow">else</span>
                    {
                        Response.Redirect(<span class="stringliteral">&quot;~/Checkout.aspx&quot;</span>, <span class="keyword">true</span>);
                        <span class="keywordflow">return</span>;
                    }

                }

            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (l_fa.Result == <span class="stringliteral">&quot;Review&quot;</span>)
            {
                ResetSessionVars();
                <span class="keywordtype">string</span> l_strMessageToUser =
                    <span class="stringliteral">&quot;We will hold your purchase request data and come back to you soon. Sorry for the delay.&quot;</span>;
                <span class="keywordtype">string</span> l_strGoBackUrl = <span class="stringliteral">&quot;Default.aspx&quot;</span>;
                Response.Redirect(<span class="stringliteral">&quot;~/PurchaseResult.aspx?message=&quot;</span> + HttpUtility.UrlEncode(l_strMessageToUser) + <span class="stringliteral">&quot;&amp;go_back_url=&quot;</span> + HttpUtility.UrlEncode(l_strGoBackUrl), <span class="keyword">true</span>);
                <span class="keywordflow">return</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// this is a Reject case</span>
                _client.CreateFraudAssessment(GetOrCreateAssessmentSession(), <span class="keyword">false</span>);
                ResetSessionVars();
                <span class="keywordtype">string</span> l_strMessageToUser =
                    <span class="stringliteral">&quot;Sorry, but we cannot process your request. Your data has been declined.&quot;</span>;
                Response.Redirect(<span class="stringliteral">&quot;~/PurchaseResult.aspx?message=&quot;</span> + HttpUtility.UrlEncode(l_strMessageToUser), <span class="keyword">true</span>);
                <span class="keywordflow">return</span>;

            }

        } <span class="comment">// Purchase_Click ()</span>
        <span class="comment">//---------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">void</span> StartOver_Click(Object o, EventArgs e)
        {
            Context.Session[<span class="stringliteral">&quot;fraudpointer_assessment_session&quot;</span>] = null;
            Response.Redirect(<span class="stringliteral">&quot;Checkout.aspx&quot;</span>, <span class="keyword">true</span>);
        } <span class="comment">// StartOver_Click()</span>
        <span class="comment">//---------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">string</span> GetAcmeOrderNumber()
        {
            String l_acmeOrderNumber = (String)Context.Session[<span class="stringliteral">&quot;acme_order_number&quot;</span>];
            if (l_acmeOrderNumber == null)
            {
                Random l_random = <span class="keyword">new</span> Random(DateTime.Now.Hour * 60 + DateTime.Now.Second);
                l_acmeOrderNumber = l_random.Next(1000, 100000).ToString();
                Context.Session[<span class="stringliteral">&quot;acme_order_number&quot;</span>] = l_acmeOrderNumber;
            }
            <span class="keywordflow">return</span> l_acmeOrderNumber;

        } <span class="comment">// GetAcmeOrderNumber ()</span>
        <span class="comment">//-------------------------</span>

        <span class="keyword">protected</span> <span class="keywordtype">int</span> GetNumberOfFailedPaymentAttempts()
        {
            <span class="keywordtype">int</span> l_numberOfFailedPaymentAttempts = 0;
            <span class="keywordflow">if</span> (Context.Session[<span class="stringliteral">&quot;number_of_failed_payment_attempts&quot;</span>] == null)
            {
                Context.Session[<span class="stringliteral">&quot;number_of_failed_payment_attempts&quot;</span>] = l_numberOfFailedPaymentAttempts;
            }
            <span class="keywordflow">else</span>
            {
                l_numberOfFailedPaymentAttempts = (int)Context.Session[<span class="stringliteral">&quot;number_of_failed_payment_attempts&quot;</span>];
            }

            <span class="keywordflow">return</span> l_numberOfFailedPaymentAttempts;
        } <span class="comment">// GetNumberOfFailedPaymentAttempts()</span>
        <span class="comment">//--------------------------------------</span>

        <span class="keyword">protected</span> AssessmentSession GetOrCreateAssessmentSession()
        {
            <span class="comment">// check whether you have session in SESSION</span>
            AssessmentSession l_assessmentSession = (AssessmentSession)Context.Session[<span class="stringliteral">&quot;fraudpointer_assessment_session&quot;</span>];

            if (l_assessmentSession == null)
            {
                <span class="keywordflow">try</span>
                {
                    l_assessmentSession = _client.CreateAssessmentSession();
                    Context.Session[<span class="stringliteral">&quot;fraudpointer_assessment_session&quot;</span>] = l_assessmentSession;
                    <span class="keywordflow">return</span> l_assessmentSession;
                }
                <span class="keywordflow">catch</span> (ClientException ex)
                {
                    <span class="keywordflow">return</span> null;
                }

            }
            <span class="keywordflow">return</span> l_assessmentSession;


        } <span class="comment">// GetOrCreateAssessmentSession ()</span>
        <span class="comment">//-----------------------------------</span>


<span class="preprocessor">        #region private methods</span>
<span class="preprocessor"></span>
        <span class="keyword">private</span> <span class="keywordtype">void</span> MessageToUser(<span class="keywordtype">string</span> i_messageToUser)
        {
            Label lb = (Label)Master.FindControl(<span class="stringliteral">&quot;lblMessageToUser&quot;</span>);
            lb.Text = i_messageToUser;

        } <span class="comment">// MessageToUser()</span>
        <span class="comment">//------------------</span>

        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">string</span> GetFraudpointerApiKey()
        {
            <span class="comment">//throw new NotImplementedException(&quot;Uncomment the following and put in web.config the API KEY that you have been provided by FraudPointer Support. Contact: support@fraudpointer.com if you need more help.&quot;);</span>
            <span class="keywordflow">return</span> ConfigurationManager.AppSettings[<span class="stringliteral">&quot;FraudPointerApiKey&quot;</span>];

        } <span class="comment">// GetFraudpointerApiKey ()</span>
        <span class="comment">//----------------------------</span>

        <span class="keyword">private</span> <span class="keywordtype">void</span> SaveToSession(AssessmentSession i_assessmentSession)
        {
            Session.Add(ASSESSMENT_SESSION, i_assessmentSession);

        } <span class="comment">// SaveToSession ()</span>
        <span class="comment">//--------------------</span>

        <span class="keyword">private</span> <span class="keywordtype">string</span> GetCalculatePriceJavascript(<span class="keywordtype">bool</span> i_returnValue)
        {
            <span class="keywordtype">string</span> calculate_price = <span class="stringliteral">&quot;javascript: calculate_price(&#39;&quot;</span> + lstBoxCityFrom.ClientID + <span class="stringliteral">&quot;&#39;, &#39;&quot;</span> +
                lstBoxCityTo.ClientID + <span class="stringliteral">&quot;&#39;, &#39;&quot;</span> + lblPriceValue.ClientID + <span class="stringliteral">&quot;&#39; ); return &quot;</span> + (i_returnValue ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>) + <span class="stringliteral">&quot;;&quot;</span>;
            <span class="keywordflow">return</span> calculate_price;
        } <span class="comment">// GetCalculatePriceJavascript ()</span>
        <span class="comment">//--------------------------------</span>

        <span class="keyword">private</span> Event CreateAndSendCheckoutEvent()
        {
            Event l_eventToCreate = <span class="keyword">new</span> Event(Event.CheckoutEvent);

            <span class="comment">// ACME_DEPARTURE_CITY is an Account Custom Session Attribute defined in Fraud Pointer Application                        </span>
            l_eventToCreate.AddData(<span class="stringliteral">&quot;ACME_DEPARTURE_CITY&quot;</span>, lstBoxCityFrom.Items[lstBoxCityFrom.SelectedIndex].Text);

            <span class="comment">// ACME_ARRIVAL_CITY is an Account Custome Session Attribute defined in Fraud Pointer Application</span>
            l_eventToCreate.AddData(<span class="stringliteral">&quot;ACME_ARRIVAL_CITY&quot;</span>, lstBoxCityTo.Items[lstBoxCityTo.SelectedIndex].Text);

            <span class="comment">// PURCHASE_AMOUNT is a System Session Attribute</span>
            l_eventToCreate.AddData(<span class="stringliteral">&quot;PURCHASE_AMOUNT&quot;</span>, CalculatePrice(lstBoxCityFrom.SelectedValue, lstBoxCityTo.SelectedValue));

            <span class="comment">// CC_HASH is a System Attribute. You should always use the CreditCardHash to hash your </span>
            <span class="comment">// Credit Card Number and send it to Fraud Pointer Server.</span>
            l_eventToCreate.AddData(<span class="stringliteral">&quot;CC_HASH&quot;</span>,  _client.CreditCardHash(txtbxCreditCardNumber.Text));

            <span class="comment">// CC_CARD_HOLDER_NAME is a System Attribute.</span>
            l_eventToCreate.AddData(<span class="stringliteral">&quot;CC_CARD_HOLDER_NAME&quot;</span>, txtbxCardHolderName.Text);

            <span class="comment">// CC_BANK_NAME is a System Attribute</span>
            l_eventToCreate.AddData(<span class="stringliteral">&quot;CC_BANK_NAME&quot;</span>, txtbxBankNameOfCard.Text);

            <span class="comment">// CREDIT_CARD_FIRST_6_DIGITS</span>
            <span class="keywordflow">if</span> (String.IsNullOrEmpty(txtbxCreditCardNumber.Text) == <span class="keyword">false</span>)
            {
                <span class="keywordflow">if</span> (txtbxCreditCardNumber.Text.Length &gt; 6)
                {
                    l_eventToCreate.AddData(<span class="stringliteral">&quot;CREDIT_CARD_FIRST_6_DIGITS&quot;</span>, txtbxCreditCardNumber.Text.Substring(0, 6));
                }
                <span class="keywordflow">else</span>
                {
                    l_eventToCreate.AddData(<span class="stringliteral">&quot;CREDIT_CARD_FIRST_6_DIGITS&quot;</span>, txtbxCreditCardNumber.Text.Substring(0, txtbxCreditCardNumber.Text.Length));
                }
            }


            <span class="keywordflow">try</span>
            {
                Event l_eventCreated = _client.AppendEventToAssessmentSession(GetOrCreateAssessmentSession(), l_eventToCreate);
                <span class="keywordflow">return</span> l_eventCreated;
            }
            <span class="keywordflow">catch</span> (ClientException ex)
            {
                <span class="keywordflow">return</span> null;
            }

        } <span class="comment">// CreateAndSendCheckoutEvent ()</span>
        <span class="comment">//----------------------------------</span>

        <span class="keyword">private</span> Event CreateAndSendSuccessfulPaymentEvent()
        {
            Event l_eventToCreate = <span class="keyword">new</span> Event(Event.PurchaseEvent);
            l_eventToCreate.AddData(<span class="stringliteral">&quot;MERCHANT_REFERENCE&quot;</span>, lblAcmeOrderNumber.Text);

            <span class="keywordflow">try</span>
            {
                Event l_eventCreated = _client.AppendEventToAssessmentSession(GetOrCreateAssessmentSession(), l_eventToCreate);
                <span class="keywordflow">return</span> l_eventCreated;
            }
            <span class="keywordflow">catch</span> (ClientException ex)
            {
                <span class="keywordflow">return</span> null;
            }
        } <span class="comment">// CreateAndSendSuccessfulPaymentEvent ()</span>
        <span class="comment">//--------------------------------------------</span>

        <span class="keyword">private</span> Event CreateAndSendFailedPaymentEvent()
        {
            Event l_eventToCreate = <span class="keyword">new</span> Event(Event.FailedPayment);
            l_eventToCreate.AddData(<span class="stringliteral">&quot;MERCHANT_REFERENCE&quot;</span>, lblAcmeOrderNumber.Text);

            <span class="keywordflow">try</span>
            {
                Event l_eventCreated = _client.AppendEventToAssessmentSession(GetOrCreateAssessmentSession(), l_eventToCreate);
                <span class="keywordflow">return</span> l_eventCreated;
            }
            <span class="keywordflow">catch</span> (ClientException ex)
            {
                <span class="keywordflow">return</span> null;
            }
        } <span class="comment">// CreateAndSendFailedPaymentEvent ()</span>
        <span class="comment">//--------------------------------------------</span>

        <span class="keyword">private</span> Decimal CalculatePrice(<span class="keywordtype">string</span> i_valueFrom, <span class="keywordtype">string</span> i_valueTo)
        {
            <span class="keywordflow">return</span> Decimal.Parse(i_valueFrom) * Decimal.Parse(i_valueTo);
        } <span class="comment">// CalculatePrice ()</span>
        <span class="comment">//--------------------</span>

        <span class="keyword">private</span> <span class="keywordtype">bool</span> SendDataToBankForCharging()
        {
            <span class="keywordflow">return</span> chckbxSuccessBankTransaction.Checked;
        } <span class="comment">// SendDataToBankForCharging ()</span>
        <span class="comment">//--------------------------------</span>

        <span class="keyword">private</span> <span class="keywordtype">void</span> ResetSessionVars()
        {
            Context.Session[<span class="stringliteral">&quot;number_of_failed_payment_attempts&quot;</span>] = 0;
            Context.Session[<span class="stringliteral">&quot;acme_order_number&quot;</span>] = 0;
            Context.Session[<span class="stringliteral">&quot;fraudpointer_assessment_session&quot;</span>] = null;
        } <span class="comment">// ResetSessionVars()</span>
        <span class="comment">//----------------------</span>

        <span class="keyword">private</span> IClient GetFraudpointerClient(<span class="keywordtype">string</span> i_fraudPointerUrl, <span class="keywordtype">string</span> i_fraudPointerApiBaseUrl, <span class="keywordtype">string</span> i_fraudPointerApiKey)
        {
            IClient l_client = ClientFactory.Construct(i_fraudPointerUrl + <span class="stringliteral">&quot;/&quot;</span> + i_fraudPointerApiBaseUrl, i_fraudPointerApiKey);
            <span class="keywordflow">return</span> l_client;

        } <span class="comment">// GetFraudpointerClient();</span>
        <span class="comment">//----------------------------</span>

<span class="preprocessor">        #endregion</span>
<span class="preprocessor"></span>
    } <span class="comment">// class Checkout</span>
    <span class="comment">//------------------</span>

} <span class="comment">// namespace WebApplicationClientExample</span>
<span class="comment">//-----------------------------------------</span>

</pre></div><p><code>PurchaseResult.aspx</code> </p>
<div class="fragment"><pre class="fragment">﻿&lt;%@ Page Language=<span class="stringliteral">&quot;C#&quot;</span> AutoEventWireup=<span class="stringliteral">&quot;true&quot;</span> CodeBehind=<span class="stringliteral">&quot;PurchaseResult.aspx.cs&quot;</span> Inherits=<span class="stringliteral">&quot;WebApplicationClientExample.PurchaseResult&quot;</span> %&gt;

&lt;!DOCTYPE html PUBLIC <span class="stringliteral">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="stringliteral">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;

&lt;html xmlns=<span class="stringliteral">&quot;http://www.w3.org/1999/xhtml&quot;</span> &gt;
&lt;head runat=<span class="stringliteral">&quot;server&quot;</span>&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form <span class="keywordtype">id</span>=<span class="stringliteral">&quot;form1&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span>&gt;
    &lt;div&gt;
        &lt;asp:Label ID=<span class="stringliteral">&quot;lblMessageToUser&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;&lt;br /&gt;
        &lt;asp:HyperLink ID=<span class="stringliteral">&quot;hplnkGoBackUrl&quot;</span> runat=<span class="stringliteral">&quot;server&quot;</span> /&gt;
    &lt;/div&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p><code>PurchaseResult.aspx.cs&lt;c&gt; </p>
<div class="fragment"><pre class="fragment">﻿using System;
<span class="keyword">using</span> System.Collections.Generic;
<span class="keyword">using</span> System.Linq;
<span class="keyword">using</span> System.Web;
<span class="keyword">using</span> System.Web.UI;
<span class="keyword">using</span> System.Web.UI.WebControls;

<span class="keyword">namespace </span>WebApplicationClientExample
{
    <span class="keyword">public</span> <span class="keyword">partial class </span>PurchaseResult : System.Web.UI.Page
    {
        <span class="keyword">protected</span> <span class="keywordtype">void</span> Page_Load(<span class="keywordtype">object</span> sender, EventArgs e)
        {
            <span class="keywordtype">string</span> l_messageToUser = Request.Params[<span class="stringliteral">&quot;message&quot;</span>];
            <span class="keywordtype">string</span> l_goBackUrl = Request.Params[<span class="stringliteral">&quot;go_back_url&quot;</span>];
            <span class="keywordflow">if</span> ( l_messageToUser != null )
            {
                lblMessageToUser.Text = l_messageToUser;
            }
            <span class="keywordflow">if</span> ( l_goBackUrl != null )
            {
                hplnkGoBackUrl.NavigateUrl = l_goBackUrl;
                hplnkGoBackUrl.Text = <span class="stringliteral">&quot;[Go BACK]&quot;</span>;
            }
        } <span class="comment">// Page_Load ()</span>
    }
}
</pre></div><p></code></p>
<p><code> <code>Web.config</code> </p>
<div class="fragment"><pre class="fragment">﻿&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;
&lt;configuration&gt;
        &lt;configSections&gt;
                &lt;sectionGroup name=<span class="stringliteral">&quot;system.web.extensions&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>&gt;
                        &lt;sectionGroup name=<span class="stringliteral">&quot;scripting&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>&gt;
                                &lt;section name=<span class="stringliteral">&quot;scriptResourceHandler&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span> requirePermission=<span class="stringliteral">&quot;false&quot;</span> allowDefinition=<span class="stringliteral">&quot;MachineToApplication&quot;</span>/&gt;
                                &lt;sectionGroup name=<span class="stringliteral">&quot;webServices&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>&gt;
                                        &lt;section name=<span class="stringliteral">&quot;jsonSerialization&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span> requirePermission=<span class="stringliteral">&quot;false&quot;</span> allowDefinition=<span class="stringliteral">&quot;Everywhere&quot;</span>/&gt;
                                        &lt;section name=<span class="stringliteral">&quot;profileService&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span> requirePermission=<span class="stringliteral">&quot;false&quot;</span> allowDefinition=<span class="stringliteral">&quot;MachineToApplication&quot;</span>/&gt;
                                        &lt;section name=<span class="stringliteral">&quot;authenticationService&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span> requirePermission=<span class="stringliteral">&quot;false&quot;</span> allowDefinition=<span class="stringliteral">&quot;MachineToApplication&quot;</span>/&gt;
                                        &lt;section name=<span class="stringliteral">&quot;roleService&quot;</span> type=<span class="stringliteral">&quot;System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span> requirePermission=<span class="stringliteral">&quot;false&quot;</span> allowDefinition=<span class="stringliteral">&quot;MachineToApplication&quot;</span>/&gt;
                                &lt;/sectionGroup&gt;
                        &lt;/sectionGroup&gt;
                &lt;/sectionGroup&gt;
        &lt;/configSections&gt;
  &lt;appSettings&gt;
    &lt;add key=<span class="stringliteral">&quot;FraudPointerUrl&quot;</span> value=<span class="stringliteral">&quot;http://10.0.0.123:3000&quot;</span>/&gt;
    &lt;add key=<span class="stringliteral">&quot;FraudPointerApiBaseUrl&quot;</span> value=<span class="stringliteral">&quot;api&quot;</span>/&gt;
    &lt;add key=<span class="stringliteral">&quot;FraudPointerScriptUrl&quot;</span> value=<span class="stringliteral">&quot;fp.js&quot;</span>/&gt;
    &lt;add key=<span class="stringliteral">&quot;FraudPointerApiKey&quot;</span> value=<span class="stringliteral">&quot;791cdee646ff8532&quot;</span>/&gt;
  &lt;/appSettings&gt;
        &lt;connectionStrings/&gt;
        &lt;system.web&gt;
                &lt;!-- 
            Set compilation debug=<span class="stringliteral">&quot;true&quot;</span> to insert debugging 
            symbols into the compiled page. Because <span class="keyword">this</span> 
            affects performance, <span class="keyword">set</span> <span class="keyword">this</span> value to <span class="keyword">true</span> only 
            during development.
        --&gt;
                &lt;compilation debug=<span class="stringliteral">&quot;true&quot;</span>&gt;
                        &lt;assemblies&gt;
                                &lt;add assembly=<span class="stringliteral">&quot;System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089&quot;</span>/&gt;
                                &lt;add assembly=<span class="stringliteral">&quot;System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089&quot;</span>/&gt;
                                &lt;add assembly=<span class="stringliteral">&quot;System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                                &lt;add assembly=<span class="stringliteral">&quot;System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089&quot;</span>/&gt;
                        &lt;/assemblies&gt;
                &lt;/compilation&gt;
                &lt;!--
            The &lt;authentication&gt; section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        --&gt;
                &lt;authentication mode=<span class="stringliteral">&quot;Windows&quot;</span>/&gt;
                &lt;!--
            The &lt;customErrors&gt; section enables configuration 
            of what to <span class="keywordflow">do</span> <span class="keywordflow">if</span>/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        &lt;customErrors mode=<span class="stringliteral">&quot;RemoteOnly&quot;</span> defaultRedirect=<span class="stringliteral">&quot;GenericErrorPage.htm&quot;</span>&gt;
            &lt;error statusCode=<span class="stringliteral">&quot;403&quot;</span> redirect=<span class="stringliteral">&quot;NoAccess.htm&quot;</span> /&gt;
            &lt;error statusCode=<span class="stringliteral">&quot;404&quot;</span> redirect=<span class="stringliteral">&quot;FileNotFound.htm&quot;</span> /&gt;
        &lt;/customErrors&gt;
        --&gt;
                &lt;pages&gt;
                        &lt;controls&gt;
                                &lt;add tagPrefix=<span class="stringliteral">&quot;asp&quot;</span> <span class="keyword">namespace</span>=<span class="stringliteral">&quot;System.Web.UI&quot;</span> assembly=<span class="stringliteral">&quot;System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                                &lt;add tagPrefix=<span class="stringliteral">&quot;asp&quot;</span> <span class="keyword">namespace</span>=<span class="stringliteral">&quot;System.Web.UI.WebControls&quot;</span> assembly=<span class="stringliteral">&quot;System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                        &lt;/controls&gt;
                &lt;/pages&gt;
                &lt;httpHandlers&gt;
                        &lt;<span class="keyword">remove</span> verb=<span class="stringliteral">&quot;*&quot;</span> path=<span class="stringliteral">&quot;*.asmx&quot;</span>/&gt;
                        &lt;add verb=<span class="stringliteral">&quot;*&quot;</span> path=<span class="stringliteral">&quot;*.asmx&quot;</span> validate=<span class="stringliteral">&quot;false&quot;</span> type=<span class="stringliteral">&quot;System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                        &lt;add verb=<span class="stringliteral">&quot;*&quot;</span> path=<span class="stringliteral">&quot;*_AppService.axd&quot;</span> validate=<span class="stringliteral">&quot;false&quot;</span> type=<span class="stringliteral">&quot;System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                        &lt;add verb=<span class="stringliteral">&quot;GET,HEAD&quot;</span> path=<span class="stringliteral">&quot;ScriptResource.axd&quot;</span> type=<span class="stringliteral">&quot;System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span> validate=<span class="stringliteral">&quot;false&quot;</span>/&gt;
                &lt;/httpHandlers&gt;
                &lt;httpModules&gt;
                        &lt;add name=<span class="stringliteral">&quot;ScriptModule&quot;</span> type=<span class="stringliteral">&quot;System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                &lt;/httpModules&gt;
        &lt;/system.web&gt;
        &lt;system.codedom&gt;
                &lt;compilers&gt;
                        &lt;compiler language=<span class="stringliteral">&quot;c#;cs;csharp&quot;</span> extension=<span class="stringliteral">&quot;.cs&quot;</span> warningLevel=<span class="stringliteral">&quot;4&quot;</span> type=<span class="stringliteral">&quot;Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot;</span>&gt;
                                &lt;providerOption name=<span class="stringliteral">&quot;CompilerVersion&quot;</span> value=<span class="stringliteral">&quot;v3.5&quot;</span>/&gt;
                                &lt;providerOption name=<span class="stringliteral">&quot;WarnAsError&quot;</span> value=<span class="stringliteral">&quot;false&quot;</span>/&gt;
                        &lt;/compiler&gt;
                &lt;/compilers&gt;
        &lt;/system.codedom&gt;
        &lt;!-- 
        The system.webServer section is required <span class="keywordflow">for</span> running ASP.NET AJAX under Internet
        Information Services 7.0.  It is not necessary <span class="keywordflow">for</span> previous version of IIS.
    --&gt;
        &lt;system.webServer&gt;
                &lt;validation validateIntegratedModeConfiguration=<span class="stringliteral">&quot;false&quot;</span>/&gt;
                &lt;modules&gt;
                        &lt;<span class="keyword">remove</span> name=<span class="stringliteral">&quot;ScriptModule&quot;</span>/&gt;
                        &lt;add name=<span class="stringliteral">&quot;ScriptModule&quot;</span> preCondition=<span class="stringliteral">&quot;managedHandler&quot;</span> type=<span class="stringliteral">&quot;System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                &lt;/modules&gt;
                &lt;handlers&gt;
                        &lt;<span class="keyword">remove</span> name=<span class="stringliteral">&quot;WebServiceHandlerFactory-Integrated&quot;</span>/&gt;
                        &lt;<span class="keyword">remove</span> name=<span class="stringliteral">&quot;ScriptHandlerFactory&quot;</span>/&gt;
                        &lt;<span class="keyword">remove</span> name=<span class="stringliteral">&quot;ScriptHandlerFactoryAppServices&quot;</span>/&gt;
                        &lt;<span class="keyword">remove</span> name=<span class="stringliteral">&quot;ScriptResource&quot;</span>/&gt;
                        &lt;add name=<span class="stringliteral">&quot;ScriptHandlerFactory&quot;</span> verb=<span class="stringliteral">&quot;*&quot;</span> path=<span class="stringliteral">&quot;*.asmx&quot;</span> preCondition=<span class="stringliteral">&quot;integratedMode&quot;</span> type=<span class="stringliteral">&quot;System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                        &lt;add name=<span class="stringliteral">&quot;ScriptHandlerFactoryAppServices&quot;</span> verb=<span class="stringliteral">&quot;*&quot;</span> path=<span class="stringliteral">&quot;*_AppService.axd&quot;</span> preCondition=<span class="stringliteral">&quot;integratedMode&quot;</span> type=<span class="stringliteral">&quot;System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                        &lt;add name=<span class="stringliteral">&quot;ScriptResource&quot;</span> preCondition=<span class="stringliteral">&quot;integratedMode&quot;</span> verb=<span class="stringliteral">&quot;GET,HEAD&quot;</span> path=<span class="stringliteral">&quot;ScriptResource.axd&quot;</span> type=<span class="stringliteral">&quot;System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot;</span>/&gt;
                &lt;/handlers&gt;
        &lt;/system.webServer&gt;
        &lt;runtime&gt;
                &lt;assemblyBinding xmlns=<span class="stringliteral">&quot;urn:schemas-microsoft-com:asm.v1&quot;</span>&gt;
                        &lt;dependentAssembly&gt;
                                &lt;assemblyIdentity name=<span class="stringliteral">&quot;System.Web.Extensions&quot;</span> publicKeyToken=<span class="stringliteral">&quot;31bf3856ad364e35&quot;</span>/&gt;
                                &lt;bindingRedirect oldVersion=<span class="stringliteral">&quot;1.0.0.0-1.1.0.0&quot;</span> newVersion=<span class="stringliteral">&quot;3.5.0.0&quot;</span>/&gt;
                        &lt;/dependentAssembly&gt;
                        &lt;dependentAssembly&gt;
                                &lt;assemblyIdentity name=<span class="stringliteral">&quot;System.Web.Extensions.Design&quot;</span> publicKeyToken=<span class="stringliteral">&quot;31bf3856ad364e35&quot;</span>/&gt;
                                &lt;bindingRedirect oldVersion=<span class="stringliteral">&quot;1.0.0.0-1.1.0.0&quot;</span> newVersion=<span class="stringliteral">&quot;3.5.0.0&quot;</span>/&gt;
                        &lt;/dependentAssembly&gt;
                &lt;/assemblyBinding&gt;
        &lt;/runtime&gt;
&lt;/configuration&gt;
</pre></div><p></code></p>
<p><code> <code>checkout.js</code> </p>
<div class="fragment"><pre class="fragment">﻿function calculate_price(lstBoxCityFromId, lstBoxCityToId, lblPriceValue) {
    var from_select = document.getElementById(lstBoxCityFromId);
    var to_select = document.getElementById(lstBoxCityToId);    
    var price_label = document.getElementById(lblPriceValue);
    price_label.innerHTML = parseInt(from_select.options[from_select.selectedIndex].value) * parseInt(to_select.options[to_select.selectedIndex].value) + <span class="stringliteral">&quot; €&quot;</span>;
} <span class="comment">// calculate_price()</span>
<span class="comment">//--------------------</span>
</pre></div><p></code></p>
<p><code></p>
<div class="fragment"><pre class="fragment"></pre></div><p> </code></p>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</body>
</html>
